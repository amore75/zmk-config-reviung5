# SPDX-License-Identifier: MIT
# -------------------------------------------------------
# ZMK Project Configuration (numpad5x6)
# Global firmware-level settings
# -------------------------------------------------------

# --- Power management ---
CONFIG_ZMK_SLEEP=y
CONFIG_ZMK_IDLE_TIMEOUT=90000          # 90 seconds of inactivity -> idle
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=7200000  # 2 hours (2 * 60 * 60 * 1000 ms) -> deep sleep

# --- Bluetooth settings ---
CONFIG_ZMK_BLE=y
CONFIG_BT_GAP_AUTO_UPDATE_CONN_PARAMS=y
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=24   # 30 ms (24 * 1.25 ms)
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=40   # 50 ms
CONFIG_BT_PERIPHERAL_PREF_LATENCY=0
CONFIG_BT_PERIPHERAL_PREF_TIMEOUT=400  # 4.0 s supervision timeout
CONFIG_BT_MAX_PAIRED=5                 # up to 5 bonded hosts

# --- USB support ---
CONFIG_ZMK_USB=y

# --- Logging (optional, can help debugging power/sleep) ---
# CONFIG_LOG=y
# CONFIG_LOG_PROCESS_THREAD=y
# CONFIG_LOG_DEFAULT_LEVEL=3

# --- Battery reporting (enabled by your shield .conf) ---
CONFIG_ADC=y
CONFIG_ZMK_BATTERY_REPORTING=y

# --- Key scanning defaults ---
CONFIG_ZMK_KSCAN_DEBOUNCE_PRESS_MS=5
CONFIG_ZMK_KSCAN_DEBOUNCE_RELEASE_MS=5

# --- General system optimizations ---
CONFIG_MAIN_STACK_SIZE=2048
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048
CONFIG_HEAP_MEM_POOL_SIZE=1024

# --- Optional: reduce console overhead on wireless builds ---
CONFIG_PRINTK=n
CONFIG_EARLY_CONSOLE=n
